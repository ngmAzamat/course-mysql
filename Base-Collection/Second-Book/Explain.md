### ‚úÖ –ì–ª–∞–≤–∞ VII: **–ö–æ–º–∞–Ω–¥–∞ EXPLAIN** –≤ MySQL

## üß† –ß—Ç–æ —Ç–∞–∫–æ–µ `EXPLAIN`?

–ö–æ–º–∞–Ω–¥–∞ `EXPLAIN` –≤ MySQL –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–∫–∞–∫ –∏–º–µ–Ω–Ω–æ** –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è SQL-–∑–∞–ø—Ä–æ—Å. –≠—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã **–ø–æ–Ω—è—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** –∏–Ω–¥–µ–∫—Å–æ–≤.
`EXPLAIN` ‚Äî –∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è **–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞**:
–∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –∫–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–∏—Å–∫, –µ—Å—Ç—å –ª–∏ –∏–Ω–¥–µ–∫—Å, —Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –∏ —Ç.–¥.

---

## üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ –∏ –ø–æ—Å–ª–µ –∏–Ω–¥–µ–∫—Å–∞:

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —É —Ç–µ–±—è –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ `users` —Å 10 000 —Å—Ç—Ä–æ–∫, –∏ —Ç—ã —á–∞—Å—Ç–æ –¥–µ–ª–∞–µ—à—å:

```sql
SELECT * FROM users WHERE email = 'azamat@example.com';
```

### üî¥ –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞:

```sql
EXPLAIN SELECT * FROM users WHERE email = 'azamat@example.com';
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

| id | select\_type | table | type    | rows  | Extra       |
| -- | ------------ | ----- | ------- | ----- | ----------- |
| 1  | SIMPLE       | users | **ALL** | 10000 | Using where |

* **type = ALL** ‚Üí —ç—Ç–æ –∑–Ω–∞—á–∏—Ç **–ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä —Å—Ç—Ä–æ–∫** (–º–µ–¥–ª–µ–Ω–Ω–æ!)
* **rows = 10000** ‚Üí —Å—Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ MySQL –ø—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç

---

### ‚úÖ –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞:

```sql
CREATE INDEX idx_email ON users(email);
```

–¢–µ–ø–µ—Ä—å —Å–Ω–æ–≤–∞:

```sql
EXPLAIN SELECT * FROM users WHERE email = 'azamat@example.com';
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

| id | select\_type | table | type    | key        | rows | Extra       |
| -- | ------------ | ----- | ------- | ---------- | ---- | ----------- |
| 1  | SIMPLE       | users | **ref** | idx\_email | 1    | Using where |

* **type = ref** ‚Üí –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å
* **key = idx\_email** ‚Üí –≤–æ—Ç –æ–Ω, —Ç–≤–æ–π –∏–Ω–¥–µ–∫—Å!
* **rows = 1** ‚Üí –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞

---

## üí° –í—ã–≤–æ–¥:

| –î–æ –∏–Ω–¥–µ–∫—Å–∞                        | –ü–æ—Å–ª–µ –∏–Ω–¥–µ–∫—Å–∞                        |
| --------------------------------- | ------------------------------------ |
| –ü–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫ (`type = ALL`) | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ (`type = ref`) |
| –ú–µ–¥–ª–µ–Ω–Ω–æ                          | –ë—ã—Å—Ç—Ä–æ                               |

---

–•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É –ø—Ä–∏–º–µ—Ä —Å `EXPLAIN` –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ, —à–∞–≥ –∑–∞ —à–∞–≥–æ–º?


–û—Ç–ª–∏—á–Ω–æ! –≠—Ç–æ –≤—Å—ë –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã SQL, –∫–æ—Ç–æ—Ä—ã–µ **–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ `SELECT`-–∑–∞–ø—Ä–æ—Å–∞—Ö** –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –í–æ—Ç –∫—Ä–∞—Ç–∫–æ –∏ –Ω–∞–≥–ª—è–¥–Ω–æ –ø—Ä–æ –∫–∞–∂–¥—É—é:

---